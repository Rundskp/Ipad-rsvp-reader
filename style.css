:root{
  --bg:#0b0c10; --card:#12131a; --muted:#9aa0a6; --text:#e9eaee;
  --line:#242633; --btn:#1d2030; --accent:#7ee787;
  --pad: max(14px, env(safe-area-inset-left));
  --topbarH: 56px;
}

*{ box-sizing:border-box; }
body{ margin:0; background: var(--bg); color: var(--text); font-family: system-ui, sans-serif; overflow-x: hidden; }
.hidden{ display:none !important; }

/* TOPBAR */
.topbar{
  position: sticky; top: 0; z-index: 999;
  padding: 8px 12px; display: grid; grid-template-columns: 1fr auto 1fr;
  align-items: center; background: rgba(10,12,16,.85);
  backdrop-filter: blur(12px); border-bottom: 1px solid var(--line);
}
.topLogo{ grid-column: 2; }
.topActions{ grid-column: 3; justify-self: end; display:flex; gap:8px; }
.glassesWrap{ height: 40px; width: 140px; filter: drop-shadow(0 2px 5px #000); }

/* BUTTONS */
.btn{ border:1px solid var(--line); background: var(--btn); color: var(--text); padding: 8px 12px; border-radius: 10px; cursor:pointer; font-weight: bold; }
.btn.ghost{ background: transparent; }
.topBtn.isActive{ outline: 2px solid var(--accent); }

/* LAYOUT */
.wrap{ max-width: 800px; margin: 0 auto; padding: 20px var(--pad); }
.card{ background: var(--card); border:1px solid var(--line); border-radius:16px; padding:20px; }
.display{ height: 160px; display:flex; align-items:center; justify-content:center; font-size: 40px; font-weight: 900; }

/* PANELS */
.panel, .popoverPanel {
  position: fixed; top: calc(var(--topbarH) + 10px); right: 12px;
  width: min(400px, 95vw); max-height: 85vh; background: var(--card);
  border: 1px solid var(--line); border-radius: 16px; z-index: 1000;
  opacity: 0; transform: translateY(-10px); pointer-events: none;
  transition: all .2s ease; overflow-y: auto; padding: 15px;
}
.isOpen{ opacity: 1; transform: translateY(0); pointer-events: auto; }
.panel-bottom{ top: auto; bottom: 0; left: 0; right: 0; width: 100%; border-radius: 20px 20px 0 0; }

/* MOBILE STACK */
@media (max-width: 768px) {
  body { display: flex; flex-direction: column; height: 100vh; }
  .topbar { display: grid !important; grid-template-columns: auto 1fr !important; grid-template-rows: auto auto; height: auto; }
  .topLogo { grid-area: 1/1; }
  #btnFileLabel { grid-area: 1/2; justify-self: start; }
  .topActions { grid-area: 2/1/2/3; width: 100%; justify-content: space-between; }
  .topActions .btn { flex: 1; }
  .headerInfoBar { position: static !important; border-radius: 0; order: 1; }
  .wrap { flex: 1; order: 2; overflow-y: auto; }
  .shelf { position: static !important; order: 3; opacity: 1; pointer-events: auto; transform: none; }
  .mobile-only { display: block !important; }
}

/* Status Element unsichtbar machen */
.statusSr { position: absolute; width: 1px; height: 1px; overflow: hidden; }
